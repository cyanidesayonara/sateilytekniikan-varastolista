{% extends request.is_ajax|yesno:"ajax.html,base.html" %}

{% block content %}
  <div id="scanner-container"></div>
  <input type="button" id="btn" value="Start/Stop Scanner">
  <input type="button" id="torch" value="Toggle Torch">
  <form action="/new/" method="POST">
    {% csrf_token %}
    <input class="textfield" type="text" name="partno">
    <button type="submit">
      New
    </button>
    <input type="checkbox" name="plus">
    Add +1
  </form>
  <form action="/plus/" method="POST">
    {% csrf_token %}
    <input class="textfield" type="text" name="partno">
    <button type="submit">
      Add
    </button>
  </form>
  <form action="/minus/" method="POST">
    {% csrf_token %}
    <input class="textfield" type="text" name="partno">
    <button type="submit">
      Subtract
    </button>
  </form>
  <form action="/edit/" method="POST">
    {% csrf_token %}
    <input class="textfield" type="text" name="partno">
    <button type="submit">
      Edit
    </button>
  </form>
  <form action="/delete/" method="POST">
    {% csrf_token %}
    <input class="textfield" type="text" name="partno">
    <button type="submit">
      Delete
    </button>
  </form>
  <table>
    <thead>
      <tr>
        <th>partno</th>
        <th>updated</th>
        <th>total</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for part in parts %}
        <tr>
          <td>
            <span>
              {{ part.partno }}
            </span>
          </td>
          <td>
            <span>
              {{ part.updated_at }}
            </span>
          </td>
          <td>
            <span>
              {{ part.total }}
            </span>
          </td>
          <td>
            <form method="POST">
              {% csrf_token %}
              <input type="hidden" name="partno" value="{{ part.partno }}">
              <button formaction="/plus/" type="submit">
                <i class="fas fa-plus"></i>
              </button>
              <button formaction="/minus/" type="submit">
                <i class="fas fa-minus"></i>
              </button>
              <button formaction="/edit/" type="submit">
                <i class="fas fa-edit"></i>
              </button>
              <button formaction="/delete/" type="submit">
                <i class="fas fa-trash-alt"></i>
              </button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}