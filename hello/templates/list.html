{% extends request.is_ajax|yesno:"ajax.html,base.html" %}

{% block content %}
  <form action="/logoff/" method="POST">
    {% csrf_token %}
    <button style="float:right" type="submit">
      Logout
    </button>   
  </form>
  <div id="scanner-container"></div>
  <button type="button" class="scanner">
    Start/Stop Scanner
  </button>
  <br>
  <button type="button" class="torch">
    Toggle Torch
  </button>
  <br>
  <br>
  <form class="ajax" method="POST">
    {% csrf_token %}
    <label>
      Partno
    </label>
    <br>
    <input class="textfield" type="text" name="partno">
    <br>
    <br>
    <button data-url="/new/" formaction="/new/" type="submit">
      New
      <i class="fas fa-plus-square"></i>
    </button>
    <input type="checkbox" name="plus">
      Add +1
    <br>
    <button formaction="/plus/" type="submit">
      Add
      <i class="fas fa-plus"></i>
    </button>
    <button formaction="/minus/" type="submit">
      Subtract
      <i class="fas fa-minus"></i>
    </button>
    <br>
    <button formaction="/edit/" type="submit">
      Edit
      <i class="fas fa-edit"></i>
    </button>
    <button formaction="/delete/" type="submit">
      Delete
      <i class="fas fa-trash-alt"></i>
    </button>
  </form>
  <br>
  <table>
    <thead>
      <tr>
        <th>partno</th>
        <th>updated</th>
        <th>total</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for part in parts %}
        <tr>
          <td data-label="Partno">
            <span>
              {{ part.partno }}
            </span>
          </td>
          <td data-label="Updated">
            <span>
              {{ part.updated_at }}
            </span>
          </td>
          <td data-label="Total">
            <span>
              {{ part.total }}
            </span>
          </td>
          <td>
            <form method="POST">
              {% csrf_token %}
              <input type="hidden" name="partno" value="{{ part.partno }}">
              <button formaction="/plus/" type="submit">
                <i class="fas fa-plus"></i>
              </button>
              <button formaction="/minus/" type="submit">
                <i class="fas fa-minus"></i>
              </button>
              <button formaction="/edit/" type="submit">
                <i class="fas fa-edit"></i>
              </button>
              <button formaction="/delete/" type="submit">
                <i class="fas fa-trash-alt"></i>
              </button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}